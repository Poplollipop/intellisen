<div class="search-area">
  <h3>關鍵字搜尋</h3>
  <div class="input-search-button">
    <input [(ngModel)]="keywords" placeholder="可輸入法院名稱、裁判案號、案由、全文檢索字詞">
    <button type="button" class="btn btn-secondary btn-sm" (click)="confirm()">搜尋</button>
  </div>

  <div class="case-type">
    <mat-icon style="cursor: pointer">filter_alt</mat-icon>
    <p>搜尋案件類型</p>
    <button type="button" class="btn btn-outline-dark btn-sm" [class.selected]="selectedButton == '刑法'"
      (click)="toggleButton('刑法')">
      刑法
    </button>
    <button type="button" class="btn btn-outline-dark btn-sm" [class.selected]="selectedButton == '民法'"
      (click)="toggleButton('民法')">
      民法
    </button>
  </div>
</div>


<!-- 進階條件 -->
<div class="bottom-area">
  <p>
    <button
      class="btn btn-outline-primary"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#collapseExample"
      aria-expanded="false"
      aria-controls="collapseExample"
      (click)="toggleAdvanced()"
    >
      @if (!isExpanded) {
        <span>
          進階篩選條件 <mat-icon>keyboard_arrow_down</mat-icon>
        </span>
      }
      @if (isExpanded) {
        <span>
          收起篩選條件 <mat-icon>keyboard_arrow_up</mat-icon>
        </span>
      }
    </button>
  </p>


  <div class="collapse" id="collapseExample">
    <div class="card card-body">

      <!-- 進階條件中的搜尋 -->
      <div class="layout-container">
        <!-- 左邊的 Accordion -->
        <div class="card flex justify-center accordion-container">
          <p-accordion [multiple]="true">
            <p-accordion-panel value="0">
              <p-accordion-header>裁判案由</p-accordion-header>
              <p-accordion-content>
                <p class="m-0">
                  <input pInputText id="username" aria-describedby="username-help" pSize="small"
                    [(ngModel)]="inputCase" />
                  <small id="username-help" style="margin-left: 0.3rem ;">請輸入案由(例如:傷害)</small>
                </p>
              </p-accordion-content>
            </p-accordion-panel>
            <p-accordion-panel value="1">
              <p-accordion-header>選擇法院</p-accordion-header>
              <p-accordion-content>
                <div class="m-0">
                  <div class="card flex justify-center">
                    <p-multiselect [options]="groupedCourts" [group]="true" [(ngModel)]="inputCourts"
                      placeholder="選擇法院" scrollHeight="250px" display="chip"
                      styleClass="w-full md:w-30" appendTo="body" size="small">
                      <ng-template let-group #group>
                        <div class="flex items-center">
                          <span>{{ group.label }}</span>
                        </div>
                      </ng-template>
                    </p-multiselect>
                  </div>
                </div>
              </p-accordion-content>
            </p-accordion-panel>
            <p-accordion-panel value="2">
              <p-accordion-header>法條搜索</p-accordion-header>
              <p-accordion-content>
                <p class="m-0">
                  <input pInputText id="username" aria-describedby="username-help" pSize="small"
                    [(ngModel)]="inputLaw" (keyup)="updateLawsList()" />
                  <small id="username-help" style="display: inline-block;margin-left: 1%;">請輸入法條(例如:刑法第277條)，不同法條請用空白隔開</small>
                </p>
              </p-accordion-content>
            </p-accordion-panel>
          </p-accordion>
        </div>

        <!-- 右邊的 Accordion -->
        <div class="card flex justify-center accordion-container">
          <p-accordion [multiple]="true">
            <p-accordion-panel value="0">
              <p-accordion-header>裁判字號</p-accordion-header>
              <p-accordion-content>
                <p class="m-0">
                  <select [(ngModel)]="year" (ngModelChange)="updateCombinedId()">
                    @for (year of ['89', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '100', '101',
                    '102', '103', '104', '105', '106', '107', '108', '109', '110', '111', '112', '113']; track $index)
                    {
                    <option>{{ year }}</option>
                    }
                  </select>
                  年度
                  <input [(ngModel)]="zhi" (ngModelChange)="updateCombinedId()">
                  字第
                  <input [(ngModel)]="hao" (ngModelChange)="updateCombinedId()">
                  號
                </p>
              </p-accordion-content>
            </p-accordion-panel>
            <p-accordion-panel value="1">
              <p-accordion-header>裁判期間</p-accordion-header>
              <p-accordion-content>
                <p class="m-0">
                  <input type="date" id="start" name="trip-start" [(ngModel)]="startDate" />
                  <span style="padding-left: 0.3rem ; padding-right: 0.3rem;">至</span>
                  <input type="date" id="start" name="trip-start" [(ngModel)]="endDate" />
                </p>
              </p-accordion-content>
            </p-accordion-panel>
            <p-accordion-panel value="2">
              <p-accordion-header>裁判種類</p-accordion-header>
              <p-accordion-content>
                <p class="m-0">
                  <select [(ngModel)]="caseType" class="wide-select">
                    <option value="">種類</option>
                    <option value="判決">判決</option>
                    <option value="裁定">裁定</option>
                  </select>
                </p>
              </p-accordion-content>
            </p-accordion-panel>
          </p-accordion>
        </div>
      </div>






    </div>
  </div>
</div>
